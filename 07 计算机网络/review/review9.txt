9 应用层(通用)

9.1 网络的计算和访问模式
    网络的计算方式
        大型机为中心的计算模式(分时共享模式)
            用户共享CPU和数据存储, 终端用于输入和输出, 如wolfram alpha
        服务器为中心的计算模式(资源共享模式)
            用户共享共同资源, 如文件服务器, 打印服务器
    网络的访问模式
        客户-服务器模式(Client-Server)
            特点
                系统利用双方计算能力和资源完成任务
            问题
                单点失效
                性能瓶颈
            如前端客户, 后端服务器
        对等模式(P2P)
            特点
                用户和资源对等状态, 分布计算
                Peer多为边缘节点
                充分利用Peer的资源, 解决单点失效和性能瓶颈问题
                无中心, Peer既是客户又是服务器
                节点间直接建立连接, 是现有网络基础上的重叠网络
            问题
                需要良好的动态协调功能
                安全性担忧
                可管理性
            如流媒体服务, 雾计算
        云计算模式(Cloud Computing)
            以网络为中心
            如数据中心, wolfram alpha
    应用层需要对可靠性, 带宽, 时延等有要求

9.2 域名系统DNS(53/UDP)
    把IP和名字互相对应, 便于人机交互
    域名从右向左逐次降低名字层次化管理
    以域为单位, 多个名字服务器对域名管理
    树形结构, 逐层查找
    某个域若设置了名字服务器, 则由该服务器负责子域管理
    IPv4根名字服务器有13个
    应用流程
        键入域名
        主机查看本机缓存以及hosts文件有无对应
        如果有, 直接访问IP
        如果没有, 则请求DNS服务器
    工作类型
        递归查询
            先请求本地DNS服务器
            若被请求的本地DNS服务器没有域名对应记录
            本地DNS向根域名DNS服务器请求
            从根域名服务器开始逐层向下一层请求
            沿着查询路径逐个返回记录最终给本地DNS, 然后给主机
        迭代查询
            先请求本地DNS服务器
            若被请求的本地DNS服务器没有域名对应记录
            本地DNS向根域名DNS服务器逐层请求
            根据返回内容, 本地DNS逐层向域名服务器查询
            对应DNS服务器直接给本地DNS, 然后给主机

9.3 文件服务FTP(21/TCP)
    工作类型
        主动模式
            主机请求服务器建立命令连接>
            服务器主动对主机建立数据通道<
        被动模式
            主机请求服务器建立命令链接>
            服务器被动让主机建立数据通道>

9.4 万维网HTTP(80/TCP)
    URL 
        Uniform Resource Locator
        统一资源定位符
    在Internet范围, 每个网页有自己的唯一URL
    此方法可移植到FTP, TELNET等
    URL格式
        <协议名>://<主机域名>:<端口>/<路径及文件名>
    两类消息
        请求消息
        响应消息
    工作类型
        用户输入URL或者点击超链接对应的URL
        主机分析URL, 通过DNS服务器找到IP地址
        主机与IP对应的80端口建立TCP连接
        主机请求服务器获得某页面(请求消息)
        服务器响应回复页面(响应消息)
        TCP连接释放
        浏览器显示页面

9.5 电子邮件SMTP和POP3(25/TCP 110/TCP)
    SMTP工作类型(发)
        发信人调用用户代理编写邮件
        用户代理用SMTP把邮件发送到预设的发送邮件服务器
        发送邮件服务器把邮件放入缓存等待发送
        发送邮件服务器SMTP向接收邮件服务器建立TCP连接
        SMTP开始向远程的SMTP发邮件
        发送完毕, SMTP将TCP连接释放
        接收邮件服务器把邮件放入收信人邮箱
    POP3工作类型(收)
        收信人打算收信时, 用POP3取回服务器里的邮件到本地