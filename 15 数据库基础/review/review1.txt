1 绪论

1.1 引言
    DB 
        DataBase
        数据库
    DBMS 
        DataBase Management System
        数据库管理系统 
    DBS 
        DataBase System 
        数据库系统
    DBA 
        DataBase Administrator
        数据库管理员
    计算机应用
        科学计算
        数据管理
        过程控制
    相关概念
        数据
            信息的符号记录
        DB
            长期存储在计算机内, 有组织可共享的相关数据集合
        DBMS
            用户和操作系统之间的数据管理软件
        DBS
            以计算机硬件为基础的记录保持系统
            包括DB, DBMS, 应用系统, 管理员, 用户
            有时包括计算机硬件
    数据管理技术发展阶段
        人工管理阶段
        文件系统阶段
        数据库系统阶段
    DBS特点
        数据的结构化
        数据共享性好, 冗余度低
        独立性高, 物理和逻辑独立性
        数据库管理系统统一管理
            数据安全性, 完整性, 并发控制, 数据库恢复
        良好用户接口

1.2 数据模型
    表示实体类型和实体间联系的模型
    概念模型
        也叫概念数据模型, 信息模型, 实体联系模型
        按照用户观点对信息建模
        模型
            矩形框, 实体型
            菱形框, 联系
            椭圆框, 实体型和联系的属性
            直线, 连接实体型和联系的属性, 表示联系的种类
    结构模型
        也叫结构数据模型, 基本数据模型
        按照计算机系统的观点对数据建模
        模型
            数据模型三要素
                数据结构描述系统静态特征
                数据操作描述系统动态特征
                数据约束条件给出数据依赖规则与制约
            分类
                层次模型, 树
                网状模型, 有向图
                关系模型, 表
                    相关术语
                        关系, 一张表
                        元组, 表的一行
                        字段, 表的一列
                        域, 属性的取值范围
                        分量, 元组中属性的取值
                        关系模式
                            记录型, 是对关系的描述
                            其实例是一个关系
                        关系数据库模式
                            一组关系模式的总称
                            简称模式
                        候选键
                            给定关系里可唯一区分不同元组的一个属性或最小属性组
                        主键
                            正在使用的候选键
                            候选键可能不止一个
                        超键
                            能唯一标识元组的属性集, 包括所有候选键
                        组合键
                            不是单一属性的主键
                        全键
                            包括所有属性的组合键
                        外键
                            其他关系模式的主键
                        主属性
                            包含在任意候选键中的属性
                        非主属性
                            不包含在任何候选键中的属性
                    操纵与完整性约束
                        插入, 删除, 更新须满足完整性约束
                        关系的完整性约束
                            实体完整性
                                每个数据表都必须有主键，而作为主键的所有字段，其属性必须是独一及非空值
                            参照完整性
                                不允许引用不存在的实体
                            自定义完整性
                    存储结构
                        实体和实体间联系都用表表示
                        表以文件形式存储
                    
1.3 数据库系统的结构及功能
    数据库系统结构功能
        SPARC接口三级结构
            模式类型 模式     视图     级别
            外部     子模式   用户视图 局部逻辑级
            概念     概念模式 DBA视图  全局逻辑级
            内部     存储模式 内部视图 物理存储级
        数据库二级映像功能
            概念模式/内模式映像
            概念模式/外模式映像
        数据独立性
            物理独立性
                存储结构改变可通过修改概念模式/内模式映像使得概念级保持不变, 因此外部级和应用程序无需改变
            逻辑独立性
                概念级改变可通过修改概念模式/外模式映像使得外部级尽量保持不变, 因此应用无需改变
        数据库系统模式结构
            数据库
            内模式
            概念模式/内模式映像 
            概念模式 
            若干个概念模式/外模式映像, 对于每个概念模式/外模式映像 
            外模式 
            若干个应用应用
        其中, DBMS运行在内模式-外模式的闭区间内
    用户角度的数据库系统的体系结构
        单用户DBS
        主从式结构DBS
        客户/服务器结构DBS
        分布式结构DBS
    数据库系统的组成
        计算机硬件, 软件, 数据库及其数据, 管理员与用户

1.4 数据库管理系统
    DDL 
        Data Definition/Description Language
        数据定义语言
    DML 
        Data Manipulation Language
        数据操纵语言
    DCL 
        Data Control Language
        数据运行控制语言
    OS 
        Operating System
        操作系统
    IO
        Input and Output
        输入输出
    数据库管理系统的功能与组成
        DBMS功能
            数据的定义与操纵
            数据库运行管理
                安全性检查, 完整性检查, 并发控制, 索引, 数据字典等
            数据的组织, 存储, 管理
            数据库的建立与维护
            数据的通信接口
        DBMS组成
            DDL
            DML
            DCL
            实用程序
    数据库管理系统流程
        用户程序给DBMS一个命令
        DBMS检查合法性, 查找子模式表, 确定该命令的权限
        DBMS依据概念模式/外模式定义确定读入的模式记录
        DBMS依据概念模式/内模式定义确定读入的物理记录
        DBMS向OS发送操作物理记录的命令
        OS启动IO程序执行操作
        将数据从数据库存储区送到系统缓冲区
        DBMS依据概念模式/外模式定义导出用户所需的记录格式
        DBMS将数据记录从系统缓冲区送到程序的用户工作区
        DBMS向用户程序返回命令执行情况和状态信息
    数据库管理系统实现方法
        N方案
            DBMS加入每个用户程序的进程
            DBMS代码出现多副本, 冗余多, 性能低
        2N方案
            DBMS的shadow加入每个用户程序的进程
            后台进行读写和日志记录
            代码只有一份, 资源占用很大降低
        M+N方案 
            是2N方案改进版, DBMS进程有M个而不是N个shadow
        N+1方案
            一个DBMS加入所有用户程序的进程
            消息开销大, 但可并发多线程

1.5 数据库设计
    设计步骤
        需求分析->概念结构->逻辑结构->物理结构->实施->运行维护
    DBA职责
        设计与定义数据库
        帮助最终用户使用数据库
        监督和控制数据库运行
        改进和重组数据库
        转储和恢复数据库
        重构数据库