# 第九次作业

## 9.1

### b

​		对所有b均不可以实施复制传播。

​		基本块$B_2,B_3,B_4,B_5$ 中的所有a均可以实施复制传播

### c

​		全局公共子表达式包括

​		(3)c=a+b	(8)b=a+b	(6)d=a+b

​		以及

​		(4)d=c-a	(9)e=c-a

### d

​		归纳变量：

​		(7)e=e+1

​		(8)b=a+b，考虑复制传播之后，变为b=b+1

​		(3)c=a+b, 考虑复制传播之后，c=b+1，由于b每次自增1，c每次也自增1

### e

​		循环不变：

​		(6)d=a+b循环不变，因为b的改变在外循环而不是内循环，a没有改变，所以a+b的值不变。

## 9.2

```assembly
	dp = 0
	t1 = 0
	t2 = 4 * n
L:	t3 = A[t1]
	t4 = B[t1]
	t5 = t3 * t4
	dp = dp + t5
	t1 = t1 + 8
	if t1 < t2 goto L
```

## 9.3

### (a)

|       |   gen    |    kill     |            IN            |          OUT          |
| :---: | :------: | :---------: | :----------------------: | :-------------------: |
| ENTRY |  $\phi$  |   $\phi$    |          $\phi$          |        $\phi$         |
| $B_1$ |  (1)(2)  | (8)(10)(11) |          $\phi$          |        (1)(2)         |
| $B_2$ |  (3)(4)  |   (5)(6)    |  (1)(2)(3)(4)(5)(8)(9)   |  (1)(2)(3)(4)(8)(9)   |
| $B_3$ |   (5)    |   (4)(6)    | (1)(2)(3)(4)(6)(7)(8)(9) | (1)(2)(3)(5)(7)(8)(9) |
| $B_4$ |  (6)(7)  |  (4)(5)(9)  |  (1)(2)(3)(5)(7)(8)(9)   |  (1)(2)(3)(6)(7)(8)   |
| $B_5$ |  (8)(9)  | (2)(7)(11)  | (1)(2)(3)(4)(5)(7)(8)(9) |  (1)(3)(4)(5)(8)(9)   |
| $B_6$ | (10)(11) |  (1)(2)(8)  |    (1)(3)(4)(5)(8)(9)    | (3)(4)(5)(9)(10)(11)  |
| EXIT  |  $\phi$  |   $\phi$    |   (3)(4)(5)(9)(10)(11)   | (3)(4)(5)(9)(10)(11)  |

### (b)

在所有可能的表达式中

在基本块结束之后，被这个基本块生成出来的且没有在之后被自己销毁的写进gen

在基本块结束之后，被这个基本块销毁的且没有在之后自己又生成出来的写进kill

|       |  e_gen   |         e_kill          |       IN       |      OUT       |
| :---: | :------: | :---------------------: | :------------: | :------------: |
| ENTRY |  $\phi$  |         $\phi$          |     $\phi$     |     $\phi$     |
| $B_1$ |   1, 2   | a+b, c-a, b*d, a-d, b+d |     $\phi$     |      1, 2      |
| $B_2$​ | a+b, c-a |      b*d, a-d, b+d      |   1, 2, c-a    | 1, 2, a+b, c-a |
| $B_3$​ |  $\phi$  |      b*d, a-d, b+d      | 1, 2, a+b, c-a | 1, 2, a+b, c-a |
| $B_4$​ |   a+b    |   b*d, a-d, b+d, e+1    | 1, 2, a+b, c-a | 1, 2, a+b, c-a |
| $B_5$​ |   c-a    |   a+b, b*d, b+d, e+1    | 1, 2, a+b, c-a |   1, 2, c-a    |
| $B_6$​ |   a-d    |   a+b, c-a, b*d, b+d    |   1, 2, c-a    |   1, 2, a-d    |
| EXIT  |  $\phi$  |         $\phi$          |   1, 2, a-d    |   1, 2, a-d    |
